<div class="container-fluid">
  <div class="d-flex flex-row-reverse">
    <button mat-mini-fab color="primary" (click)="isfilter = !isfilter" aria-label="Example icon button with a filter list icon" >
      <mat-icon>filter_list</mat-icon>
    </button>
    
  </div>
  <div class="col-12" *ngIf="isfilter">
    <div class="card text-white">
      <div class="card-header bg-dark fw-bold">
        <div class="d-flex row">
          <div class="col-sm-12 col-md-6 col-lg-6">
            Search
          </div>
        </div>
      </div>
        <form [formGroup]="weatherInputGroup">
          <div class="d-flex row pt-3">
            <div class="col-sm-12 col-md-6 col-lg-6" >
              <mat-form-field appearance="outline">
                <mat-label>Enter a City Name / Zip code</mat-label>
                <input matInput placeholder="Enter a City Name / Zip code" formControlName="CityName">
              </mat-form-field>
              <p class="text-muted ms-1">
                  Note: CityName/Zipcode does not allow spaces.
              </p>
            </div>
            <div class="col-sm-12 col-md-6 col-lg-6" >
              <mat-form-field appearance="outline">
                <mat-label>Select No of Days Weather Info</mat-label>
                <mat-select  required placeholder="Select No of Days Weather Info" formControlName="NoOfDays">
                  <mat-option>Select Number of days required</mat-option>
                  <mat-option value="1">1 Day</mat-option>
                  <mat-option value="2">2 Days</mat-option>
                  <mat-option value="3">3 Days</mat-option>
                  <mat-option value="4">4 Days</mat-option>
                  <mat-option value="5">5 Days</mat-option>
                  
                  
                </mat-select>
              </mat-form-field>
              
            </div>
          </div>
        </form>
      <div class="card-footer p-0">
        <div class="col-12 d-flex flex-row-reverse">
          <button type="button" class="btn btn-sm btn-success"  (click)="getWeatherInfo()">Get Weather Info</button>
        </div>
      </div>
    </div>
  </div>
  <!-- <div class="d-flex justify-content-center">
    <div class="spinner-border" role="status">
      <span class="visually-hidden">Loading...</span>
    </div>
  </div> -->
  
  <div class="col-12 pt-3" *ngIf="isShowWeatherInfo">
    <div class="card text-white">
      <div class="card-header bg-dark fw-bold"> {{location}} Next {{noOfDays}} Days Weather Report.</div>
      <div class="card-body">
        <div class="col-12 pb-2" *ngFor="let responseInfoOfI of weatherResponse">
          <mat-accordion>
            <mat-expansion-panel>
              <mat-expansion-panel-header>
                <mat-panel-title>
                  Data : {{responseInfoOfI['dt_txt'].split(" ")[0]}}
                 </mat-panel-title>
                 <mat-panel-title class="d-flex flex-row-reverse">
                  <img [src]="'http://openweathermap.org/img/wn/' + responseInfoOfI.weather[0]?.icon + '@2x.png'" alt="Weather icon">
                 </mat-panel-title>
                
              </mat-expansion-panel-header>
                <!-- <div class="col-12">{{responseInfoOfI |json}}</div> -->
                <div class="row">
                  <div class="col-sm-12 col-md-6 col-lg-6" >
                    <div class="fw-bold">{{location}} - </div>
                    <div class="col-lg-6 col-sm-12 pt-3">
                      <div class="fw-bold fs-2">
                        {{math.trunc(responseInfoOfI['main']['temp'] - 273.15)}}째C  <img [src]="'http://openweathermap.org/img/wn/' + responseInfoOfI.weather[0]?.icon + '@2x.png'" alt="Weather icon">
                      </div>
                      {{ responseInfoOfI.weather[0]?.description }}
                      <div class="col-lg-6 col-sm-12 pt-2">
                        Wind Speed : {{responseInfoOfI['wind']['speed']}}
                      </div>
                      <div class="col-lg-6 col-sm-12 pt-2">
                        Pressure : {{responseInfoOfI.main.pressure.toLocaleString()}}
                      </div>
                      
                    </div>
                    
                    <!-- <div class="col-lg-6 col-sm-12 pt-2"> 
                      sunrise : {{ (cityInfo.sunrise * 1000) | date:'HH:mm:ss' : '+0530' }}
                    </div>
                    <div class="col-lg-6 col-sm-12 pt-2">
                      humidity : {{responseInfoOfI['main']['humidity']}} %
                    </div>
                    <div class="col-lg-6 col-sm-12 pt-2">
                      
                    </div>
                    <div class="col-lg-6 col-sm-12 pt-2">
                      feels_like : {{responseInfoOfI['main']['feels_like']}}
                    </div> -->

                  </div>
                  <div class="col-sm-12 col-md-6 col-lg-6" >
                    <div class="fw-bold">Details - </div>
                    <div class="col-lg-6 col-sm-12 pt-2"> 
                      Sunrise : {{ (cityInfo.sunrise * 1000) | date:'HH:mm:ss' : '+0530' }} AM
                    </div>
                    <div class="col-lg-6 col-sm-12 pt-2">
                      Humidity : {{responseInfoOfI['main']['humidity']}} %
                    </div>
                    <div class="col-lg-6 col-sm-12 pt-2">
                      Minimum Temperature: {{ math.trunc(responseInfoOfI['main']['temp_min'] - 273.15)}}째C
                    </div>
                    <div class="col-lg-6 col-sm-12 pt-2">
                      Maximum Temperature: {{ math.trunc(responseInfoOfI['main']['temp_max'] - 273.15)}}째C
                    </div>
                    <div class="col-lg-6 col-sm-12 pt-2">
                      Feels_like : {{responseInfoOfI['main']['feels_like']}}
                    </div>
                    <div class="col-lg-6 col-sm-12 pt-2"> 
                      Sunset : {{ (cityInfo.sunset * 1000) | date:'HH:mm:ss' : '+0530' }} PM
                    </div>
                    <div class="col-lg-6 col-sm-12 pt-2"> 
                      Visibility : {{ (responseInfoOfI.visibility / 1000).toFixed(1) }} KM
                    </div>
                    
                  </div>
                   
                  <!-- <div class="col-lg-6 col-sm-12"> 
                    sunrise : {{ (cityInfo.sunset * 1000) | date:'HH:mm:ss' : '+0530' }}}}
                  </div>
                  <div class="col-lg-6 col-sm-12">
                    sunset : {{cityInfo['sunset'] | date: 'mediumTime' }}
                  </div>
                  <div class="col-lg-6 col-sm-12">
                    temp : {{math.trunc(responseInfoOfI['main']['temp'] - 273.15)}}
                  </div>
                  <div class="col-lg-6 col-sm-12">
                    feels_like : {{responseInfoOfI['main']['feels_like']}}
                  </div>
                  <div class="col-lg-6 col-sm-12">
                    temp_min : {{math.trunc(responseInfoOfI['main']['temp_min'] - 274.15)}}
                  </div>
                  <div class="col-lg-6 col-sm-12">
                    temp_max : {{math.trunc(responseInfoOfI['main']['temp_max'] - 274.15)}}
                  </div>
                  <div class="col-lg-6 col-sm-12">
                    pressure : {{responseInfoOfI['main']['pressure']}}
                  </div>
                  <div class="col-lg-6 col-sm-12">
                    humidity : {{responseInfoOfI['main']['humidity']}}
                  </div>
                  <div class="col-lg-6 col-sm-12">
                    humidity : {{responseInfoOfI['main']['humidity']}}
                  </div> -->
                </div>
                
            </mat-expansion-panel>
            <mat-expansion-panel (opened)="panelOpenState = true"
                                 (closed)="panelOpenState = false">
            </mat-expansion-panel>
          </mat-accordion>
        </div>
        <!-- <div class="col-12 pb-2" *ngFor="let responseInfoOfI of weatherResponse">
          <div class="card text-dark bg-light" >
            <div class="card-header bg-light fw-bold">
              <div class="row">
                <div class="col-6">Date : </div>
                <div class="upAngle col-6 text-end">
                  <button type="button" class="btn btn-primary py-0 px-0" (click)="changeIcon()">{{showIcon}}</button>
                  
                </div>
              </div>
            </div>
            <div >
              <h5 class="card-title fw-semibold">( ______ )</h5>
              <h6 class="card-text my-3 mt-3">Temp: {{isShowWeatherInfo}}째C</h6>
              <h6 class="card-text my-3">Wind: __ M/S</h6>
              <h6 class="card-text my-3">Humidity: %</h6>
            </div>
          </div>
        </div> -->
      </div>
    </div>
  </div>
</div>